#!/bin/sh

for bat in /sys/class/power_supply/*BAT* ; do
	#[[ -n "${capacity+x}" ]] && printf "|" # prints | separator if battery is not the first.
	[[ -n "$capacity" ]] && printf "|" # prints | separator if battery is not the first.
	capacity="$(cat $bat/capacity)"
	stat="$(cat $bat/status)" # one of: Full, Discharging, Charging, Not charging, Unknown
	case $stat in 
			"Full") printf "ÔÉß $capacity%%";;
			"Discharging") case $capacity in
								100) printf "Û∞Åπ $capacity%%";;
								[9][0-9]) printf "Û∞Åπ  $capacity%%";;
								[8][0-9]) printf "Û∞ÇÇ  $capacity%%";;
								[7][0-9]) printf "Û∞ÇÅ  $capacity%%";;
								[6][0-9]) printf "Û∞ÇÄ  $capacity%%";;
								[5][0-9]) printf "Û∞Åø  $capacity%%";;
								[4][0-9]) printf "Û∞Åæ  $capacity%%";;
								[3][1-9]) printf "Û∞ÅΩ  $capacity%%";;
								30) printf "‚ùóÛ∞ÅΩ $capacity%%";;
								[2][0-9]) printf "‚ùóÛ∞Åº $capacity%%";;
								[1][0-9]) printf "‚ùóÛ∞Åª $capacity%%";;
	 							[0-9]) printf "‚ùóÛ∞Å∫  $capacity%%";;
						   esac;;
			"Charging") case $capacity in
		 					[0-9]) printf "Û∞¢ú   $capacity%%";;
							[1][0-9]) printf "Û∞ÇÜ  $capacity%%";;
							[2][0-9]) printf "Û∞ÇÜ  $capacity%%";;
							[3][0-9]) printf "Û∞Çà  $capacity%%";;
							[4][0-9]) printf "Û∞¢ù  $capacity%%";;
							[5][0-9]) printf "Û∞Çâ  $capacity%%";;
							[6][0-9]) printf "Û∞¢û  $capacity%%";;
							[7][0-9]) printf "Û∞Çä  $capacity%%";;
							[8][0-9]) printf "Û∞Çã  $capacity%%";;
							[9][0-9]) printf "Û∞ÇÖ  $capacity%%";;
							100) printf "ÔÉß $capacity%%";;
						esac;;
			"Not charging") echo 'üîå';;
			"Unknown");;
	esac
done
